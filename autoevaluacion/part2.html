<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<style>

table, td,tr, th
{
  border: 1px solid black;
  border-collapse: collapse;
}

</style>
<body>

</body>

<script type="text/javascript">

//WebComponents (MVC)

class CRUDModel
{
  constructor()
  {
    this.dataContainer = new Array();
  }

  create( data )
  {
    this.dataContainer.push( data );

    console.log(this.dataContainer);
  }

  edit() 
  {

  }

  delete()
  {
    //todo..
  }

}

class CRUDViewController
{
  constructor(view, model)
  {
    this.innerView = view;
    this.innerModel = model;
    

    this.innerView.createButton.onclick = () => this.oncreatebuttonclick();
   
  }

  oncreatebuttonclick()
  {
    let dataFromView = this.innerView.getDataInput();
    this.innerModel.create(dataFromView);
    this.innerView.render(this.innerModel.dataContainer); // Actualizar la representación gráfica
    this.innerView.clearInputFields(); // Limpiar los campos de entrada después de la creación
 }


  onupdatebuttonclick() 
  {

  }
  
}

class CRUDView extends HTMLElement
{
  constructor()
  {
    super();
    
    this.viewTitle = document.createElement('h1');
    this.viewTitle.innerText = 'CRUDApplication Example';

    this.createButton = document.createElement('button');
    this.createButton.innerText = 'create';

    this.nameInput = document.createElement('input');
    this.nameInput.type = 'text';
    this.nameInput.placeholder = 'Nombre....';

    this.surnameInput = document.createElement('input');
    this.surnameInput.type = 'text';
    this.surnameInput.placeholder = 'Apellido....';

    this.phoneInput = document.createElement('input');
    this.phoneInput.type = 'text';
    this.phoneInput.placeholder = 'Telefono....';
    
    this.optionsInput = document.createElement('select');

    const option1 = document.createElement("option");
    const option2 = document.createElement("option");
    const option3 = document.createElement("option");
    const option4 = document.createElement("option");
    const option5 = document.createElement("option");
    const option6 = document.createElement("option");

    option1.value = "1";
    option1.text = "Amigos";

    option2.value = "2";
    option2.text = "Trabajo";

    option3.value = "3";
    option3.text = "Estudio";

    option4.value = "4";
    option4.text = "Familia";

    option5.value = "5";
    option5.text = "Favoritos";

    option6.value = "6";
    option6.text = "Servicios";

    this.optionsInput.add(option1, null);
    this.optionsInput.add(option2, null);
    this.optionsInput.add(option3, null);
    this.optionsInput.add(option4, null);
    this.optionsInput.add(option5, null);
    this.optionsInput.add(option6, null);

    this.updateButton = document.createElement('button');
    this.updateButton.innerText = 'update';

    this.deleteButton = document.createElement('button');
    this.deleteButton.innerText = 'delete';

    this.dataTitle = document.createElement('h4');
    this.dataTitle.innerText = 'Data:';

    this.result = document.createElement('table');
    this.resultHeader = this.result.createTHead();
    this.resultBody = this.result.createTBody();

    let columnTags = ['id','Name', 'Surname', 'Phone', 'Category'];

    this.resultHeaderRow = this.resultHeader.insertRow();

    for( let tag of columnTags )
    {
      let columnElement = document.createElement('th');
      columnElement.innerText = tag;
      this.resultHeaderRow.insertCell().appendChild( columnElement );
    }
  
    this.appendChild(this.viewTitle);

    this.appendChild(this.nameInput);
    this.appendChild(this.surnameInput);
    this.appendChild(this.phoneInput);
    this.appendChild(this.optionsInput);
    this.appendChild(this.createButton);
    this.appendChild(document.createElement('br'));
    this.appendChild(document.createElement('br'));
    this.appendChild(this.updateButton);
    this.appendChild(this.deleteButton);
    this.appendChild(document.createElement('br'));
    this.appendChild(this.dataTitle);
    this.appendChild(this.result);

    //Controller
    this.innerModel = new CRUDModel();
    this.innerController = new CRUDViewController(this, this.innerModel );
  }
  
  connectedCallback()
  {
    
  }
  
  disconnectedCallback()
  {
    
  }

  clearInputFields()
  {
    this.nameInput.value = '';
    this.surnameInput.value = '';
    this.phoneInput.value = '';
  }
  
  getDataInput()
  {
    let data =
    {
      name: this.nameInput.value,
      surname: this.surnameInput.value,
      phone: this.phoneInput.value,
      category: this.optionsInput.value
    }

    return data;
  }

  render( dataContainer )
  {
    //Fill table 
    //class/css style.
  }
}

customElements.define('x-crud', CRUDView);

function main()
{
  let appView = new CRUDView();
  document.body.appendChild(appView);
}

window.onload = main;


</script>

</html>

